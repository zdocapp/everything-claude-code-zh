{
  "sourceFile": "skills/skill-stocktake/SKILL.md",
  "sourceLanguage": "en-US",
  "entries": [
    {
      "en-US": "---\ndescription: \"Use when auditing Claude skills and commands for quality. Supports Quick Scan (changed skills only) and Full Stocktake modes with sequential subagent batch evaluation.\"\norigin: ECC\n---",
      "zh-Hans": "---\ndescription: \"用于审计Claude技能和命令的质量。支持快速扫描（仅变更技能）和全面盘点模式，采用顺序子代理批量评估。\"\norigin: ECC\n---"
    },
    {
      "en-US": "# skill-stocktake",
      "zh-Hans": "# skill-stocktake"
    },
    {
      "en-US": "Slash command (`/skill-stocktake`) that audits all Claude skills and commands using a quality checklist + AI holistic judgment. Supports two modes: Quick Scan for recently changed skills, and Full Stocktake for a complete review.",
      "zh-Hans": "斜杠命令 (`/skill-stocktake`)，用于使用质量检查清单 + AI 整体判断来审核所有 Claude 技能和命令。支持两种模式：用于最近更改技能的快速扫描，以及用于完整审查的全面盘点。"
    },
    {
      "en-US": "## Scope",
      "zh-Hans": "## 范围"
    },
    {
      "en-US": "The command targets the following paths **relative to the directory where it is invoked**:",
      "zh-Hans": "该命令针对以下**相对于调用命令所在目录**的路径："
    },
    {
      "en-US": "| Path | Description |\n|------|-------------|\n| `~/.claude/skills/` | Global skills (all projects) |\n| `{cwd}/.claude/skills/` | Project-level skills (if the directory exists) |",
      "zh-Hans": "| 路径 | 描述 |\n|------|-------------|\n| `~/.claude/skills/` | 全局技能（所有项目） |\n| `{cwd}/.claude/skills/` | 项目级技能（如果目录存在） |"
    },
    {
      "en-US": "**At the start of Phase 1, the command explicitly lists which paths were found and scanned.**",
      "zh-Hans": "**在第 1 阶段开始时，该命令会明确列出找到并扫描了哪些路径。**"
    },
    {
      "en-US": "### Targeting a specific project",
      "zh-Hans": "### 针对特定项目"
    },
    {
      "en-US": "To include project-level skills, run from that project's root directory:",
      "zh-Hans": "要包含项目级技能，请从该项目根目录运行："
    },
    {
      "en-US": "```bash\ncd ~/path/to/my-project\n/skill-stocktake\n```",
      "zh-Hans": "```bash\ncd ~/path/to/my-project\n/skill-stocktake\n```"
    },
    {
      "en-US": "If the project has no `.claude/skills/` directory, only global skills and commands are evaluated.",
      "zh-Hans": "如果项目没有 `.claude/skills/` 目录，则只评估全局技能和命令。"
    },
    {
      "en-US": "## Modes",
      "zh-Hans": "## 模式"
    },
    {
      "en-US": "| Mode | Trigger | Duration |\n|------|---------|---------|\n| Quick Scan | `results.json` exists (default) | 5–10 min |\n| Full Stocktake | `results.json` absent, or `/skill-stocktake full` | 20–30 min |",
      "zh-Hans": "| 模式 | 触发条件 | 持续时间 |\n|------|---------|---------|\n| 快速扫描 | `results.json` 存在（默认） | 5–10 分钟 |\n| 全面盘点 | `results.json` 不存在，或 `/skill-stocktake full` | 20–30 分钟 |"
    },
    {
      "en-US": "**Results cache:** `~/.claude/skills/skill-stocktake/results.json`",
      "zh-Hans": "**结果缓存：** `~/.claude/skills/skill-stocktake/results.json`"
    },
    {
      "en-US": "## Quick Scan Flow",
      "zh-Hans": "## 快速扫描流程"
    },
    {
      "en-US": "Re-evaluate only skills that have changed since the last run (5–10 min).",
      "zh-Hans": "仅重新评估自上次运行以来发生更改的技能（5–10 分钟）。"
    },
    {
      "en-US": "1. Read `~/.claude/skills/skill-stocktake/results.json`\n2. Run: `bash ~/.claude/skills/skill-stocktake/scripts/quick-diff.sh \\\n         ~/.claude/skills/skill-stocktake/results.json`\n   (Project dir is auto-detected from `$PWD/.claude/skills`; pass it explicitly only if needed)\n3. If output is `[]`: report \"No changes since last run.\" and stop\n4. Re-evaluate only those changed files using the same Phase 2 criteria\n5. Carry forward unchanged skills from previous results\n6. Output only the diff\n7. Run: `bash ~/.claude/skills/skill-stocktake/scripts/save-results.sh \\\n         ~/.claude/skills/skill-stocktake/results.json <<< \"$EVAL_RESULTS\"`",
      "zh-Hans": "1. 读取 `~/.claude/skills/skill-stocktake/results.json`\n2. 运行：`bash ~/.claude/skills/skill-stocktake/scripts/quick-diff.sh \\   ~/.claude/skills/skill-stocktake/results.json`\n   （项目目录从 `$PWD/.claude/skills` 自动检测；仅在需要时显式传递）\n3. 如果输出是 `[]`：报告“自上次运行以来无更改。”并停止\n4. 使用相同的第 2 阶段标准仅重新评估那些已更改的文件\n5. 沿用先前结果中未更改的技能\n6. 仅输出差异\n7. 运行：`bash ~/.claude/skills/skill-stocktake/scripts/save-results.sh \\   ~/.claude/skills/skill-stocktake/results.json <<< \"$EVAL_RESULTS\"`"
    },
    {
      "en-US": "## Full Stocktake Flow",
      "zh-Hans": "## 全面盘点流程"
    },
    {
      "en-US": "### Phase 1 — Inventory",
      "zh-Hans": "### 第 1 阶段 — 清单"
    },
    {
      "en-US": "Run: `bash ~/.claude/skills/skill-stocktake/scripts/scan.sh`",
      "zh-Hans": "运行：`bash ~/.claude/skills/skill-stocktake/scripts/scan.sh`"
    },
    {
      "en-US": "The script enumerates skill files, extracts frontmatter, and collects UTC mtimes.\nProject dir is auto-detected from `$PWD/.claude/skills`; pass it explicitly only if needed.\nPresent the scan summary and inventory table from the script output:",
      "zh-Hans": "脚本枚举技能文件，提取 frontmatter，并收集 UTC 修改时间。\n项目目录从 `$PWD/.claude/skills` 自动检测；仅在需要时显式传递。\n从脚本输出中呈现扫描摘要和清单表："
    },
    {
      "en-US": "```\nScanning:\n  ✓ ~/.claude/skills/         (17 files)\n  ✗ {cwd}/.claude/skills/    (not found — global skills only)\n```",
      "zh-Hans": "```\nScanning:\n  ✓ ~/.claude/skills/         (17 files)\n  ✗ {cwd}/.claude/skills/    (not found — global skills only)\n```"
    },
    {
      "en-US": "| Skill | 7d use | 30d use | Description |\n|-------|--------|---------|-------------|",
      "zh-Hans": "| 技能 | 7天使用 | 30天使用 | 描述 |\n|-------|--------|---------|-------------|"
    },
    {
      "en-US": "### Phase 2 — Quality Evaluation",
      "zh-Hans": "### 第 2 阶段 — 质量评估"
    },
    {
      "en-US": "Launch a Task tool subagent (**Explore agent, model: opus**) with the full inventory and checklist.\nThe subagent reads each skill, applies the checklist, and returns per-skill JSON:",
      "zh-Hans": "启动一个 Task 工具子代理（**Explore 代理，模型：opus**），提供完整的清单和检查清单。\n子代理读取每个技能，应用检查清单，并返回每个技能的 JSON："
    },
    {
      "en-US": "`{ \"verdict\": \"Keep\"|\"Improve\"|\"Update\"|\"Retire\"|\"Merge into [X]\", \"reason\": \"...\" }`",
      "zh-Hans": "`{ \"verdict\": \"Keep\"|\"Improve\"|\"Update\"|\"Retire\"|\"Merge into [X]\", \"reason\": \"...\" }`"
    },
    {
      "en-US": "**Chunk guidance:** Process ~20 skills per subagent invocation to keep context manageable. Save intermediate results to `results.json` (`status: \"in_progress\"`) after each chunk.",
      "zh-Hans": "**分块指导：** 每个子代理调用处理约 20 个技能，以保持上下文可管理。在每个块之后将中间结果保存到 `results.json` (`status: \"in_progress\"`)。"
    },
    {
      "en-US": "After all skills are evaluated: set `status: \"completed\"`, proceed to Phase 3.",
      "zh-Hans": "所有技能评估完成后：设置 `status: \"completed\"`，进入第 3 阶段。"
    },
    {
      "en-US": "**Resume detection:** If `status: \"in_progress\"` is found on startup, resume from the first unevaluated skill.",
      "zh-Hans": "**恢复检测：** 如果在启动时找到 `status: \"in_progress\"`，则从第一个未评估的技能处恢复。"
    },
    {
      "en-US": "Each skill is evaluated against this checklist:",
      "zh-Hans": "每个技能都根据此检查清单进行评估："
    },
    {
      "en-US": "```\n- [ ] Content overlap with other skills checked\n- [ ] Overlap with MEMORY.md / CLAUDE.md checked\n- [ ] Freshness of technical references verified (use WebSearch if tool names / CLI flags / APIs are present)\n- [ ] Usage frequency considered\n```",
      "zh-Hans": "```\n- [ ] Content overlap with other skills checked\n- [ ] Overlap with MEMORY.md / CLAUDE.md checked\n- [ ] Freshness of technical references verified (use WebSearch if tool names / CLI flags / APIs are present)\n- [ ] Usage frequency considered\n```"
    },
    {
      "en-US": "Verdict criteria:",
      "zh-Hans": "判定标准："
    },
    {
      "en-US": "| Verdict | Meaning |\n|---------|---------|\n| Keep | Useful and current |\n| Improve | Worth keeping, but specific improvements needed |\n| Update | Referenced technology is outdated (verify with WebSearch) |\n| Retire | Low quality, stale, or cost-asymmetric |\n| Merge into [X] | Substantial overlap with another skill; name the merge target |",
      "zh-Hans": "| 判定 | 含义 |\n|---------|---------|\n| Keep | 有用且最新 |\n| Improve | 值得保留，但需要特定改进 |\n| Update | 引用的技术已过时（通过 WebSearch 验证） |\n| Retire | 质量低、陈旧或成本不对称 |\n| Merge into \\[X] | 与另一技能有大量重叠；命名合并目标 |"
    },
    {
      "en-US": "Evaluation is **holistic AI judgment** — not a numeric rubric. Guiding dimensions:",
      "zh-Hans": "评估是**整体 AI 判断** — 不是数字评分标准。指导维度："
    },
    {
      "en-US": "- **Actionability**: code examples, commands, or steps that let you act immediately\n- **Scope fit**: name, trigger, and content are aligned; not too broad or narrow\n- **Uniqueness**: value not replaceable by MEMORY.md / CLAUDE.md / another skill\n- **Currency**: technical references work in the current environment",
      "zh-Hans": "* **可操作性**：代码示例、命令或步骤，让你可以立即行动\n* **范围契合度**：名称、触发器和内容保持一致；不过于宽泛或狭窄\n* **独特性**：价值不能被 MEMORY.md / CLAUDE.md / 其他技能取代\n* **时效性**：技术引用在当前环境中有效"
    },
    {
      "en-US": "**Reason quality requirements** — the `reason` field must be self-contained and decision-enabling:",
      "zh-Hans": "**原因质量要求** — `reason` 字段必须是自包含且能支持决策的："
    },
    {
      "en-US": "- Do NOT write \"unchanged\" alone — always restate the core evidence\n- For **Retire**: state (1) what specific defect was found, (2) what covers the same need instead\n  - Bad: `\"Superseded\"`\n  - Good: `\"disable-model-invocation: true already set; superseded by continuous-learning-v2 which covers all the same patterns plus confidence scoring. No unique content remains.\"`\n- For **Merge**: name the target and describe what content to integrate\n  - Bad: `\"Overlaps with X\"`\n  - Good: `\"42-line thin content; Step 4 of chatlog-to-article already covers the same workflow. Integrate the 'article angle' tip as a note in that skill.\"`\n- For **Improve**: describe the specific change needed (what section, what action, target size if relevant)\n  - Bad: `\"Too long\"`\n  - Good: `\"276 lines; Section 'Framework Comparison' (L80–140) duplicates ai-era-architecture-principles; delete it to reach ~150 lines.\"`\n- For **Keep** (mtime-only change in Quick Scan): restate the original verdict rationale, do not write \"unchanged\"\n  - Bad: `\"Unchanged\"`\n  - Good: `\"mtime updated but content unchanged. Unique Python reference explicitly imported by rules/python/; no overlap found.\"`",
      "zh-Hans": "* 不要只写“未更改” — 始终重述核心证据\n* 对于 **Retire**：说明 (1) 发现了什么具体缺陷，(2) 有什么替代方案覆盖了相同需求\n  * 差：`\"Superseded\"`\n  * 好：`\"disable-model-invocation: true already set; superseded by continuous-learning-v2 which covers all the same patterns plus confidence scoring. No unique content remains.\"`\n* 对于 **Merge**：命名目标并描述要集成什么内容\n  * 差：`\"Overlaps with X\"`\n  * 好：`\"42-line thin content; Step 4 of chatlog-to-article already covers the same workflow. Integrate the 'article angle' tip as a note in that skill.\"`\n* 对于 **Improve**：描述所需的具体更改（哪个部分，什么操作，如果相关则说明目标大小）\n  * 差：`\"Too long\"`\n  * 好：`\"276 lines; Section 'Framework Comparison' (L80–140) duplicates ai-era-architecture-principles; delete it to reach ~150 lines.\"`\n* 对于 **Keep**（快速扫描中仅 mtime 更改）：重述原始判定理由，不要写“未更改”\n  * 差：`\"Unchanged\"`\n  * 好：`\"mtime updated but content unchanged. Unique Python reference explicitly imported by rules/python/; no overlap found.\"`"
    },
    {
      "en-US": "### Phase 3 — Summary Table",
      "zh-Hans": "### 第 3 阶段 — 摘要表"
    },
    {
      "en-US": "| Skill | 7d use | Verdict | Reason |\n|-------|--------|---------|--------|",
      "zh-Hans": "| 技能 | 7天使用 | 判定 | 原因 |\n|-------|--------|---------|--------|"
    },
    {
      "en-US": "### Phase 4 — Consolidation",
      "zh-Hans": "### 第 4 阶段 — 整合"
    },
    {
      "en-US": "1. **Retire / Merge**: present detailed justification per file before confirming with user:\n   - What specific problem was found (overlap, staleness, broken references, etc.)\n   - What alternative covers the same functionality (for Retire: which existing skill/rule; for Merge: the target file and what content to integrate)\n   - Impact of removal (any dependent skills, MEMORY.md references, or workflows affected)\n2. **Improve**: present specific improvement suggestions with rationale:\n   - What to change and why (e.g., \"trim 430→200 lines because sections X/Y duplicate python-patterns\")\n   - User decides whether to act\n3. **Update**: present updated content with sources checked\n4. Check MEMORY.md line count; propose compression if >100 lines",
      "zh-Hans": "1. **Retire / Merge**：在用户确认之前，按文件呈现详细理由：\n   * 发现了什么具体问题（重叠、陈旧、引用损坏等）\n   * 什么替代方案覆盖了相同功能（对于 Retire：哪个现有技能/规则；对于 Merge：目标文件以及要集成什么内容）\n   * 移除的影响（是否有依赖技能、MEMORY.md 引用或受影响的工作流）\n2. **Improve**：呈现具体的改进建议及理由：\n   * 更改什么以及为什么（例如，“将 430 行压缩至 200 行，因为 X/Y 部分与 python-patterns 重复”）\n   * 用户决定是否采取行动\n3. **Update**：呈现已检查来源的更新后内容\n4. 检查 MEMORY.md 行数；如果超过 100 行，则建议压缩"
    },
    {
      "en-US": "## Results File Schema",
      "zh-Hans": "## 结果文件模式"
    },
    {
      "en-US": "`~/.claude/skills/skill-stocktake/results.json`:",
      "zh-Hans": "`~/.claude/skills/skill-stocktake/results.json`："
    },
    {
      "en-US": "**`evaluated_at`**: Must be set to the actual UTC time of evaluation completion.\nObtain via Bash: `date -u +%Y-%m-%dT%H:%M:%SZ`. Never use a date-only approximation like `T00:00:00Z`.",
      "zh-Hans": "**`evaluated_at`**：必须设置为评估完成时的实际 UTC 时间。\n通过 Bash 获取：`date -u +%Y-%m-%dT%H:%M:%SZ`。切勿使用仅日期的近似值，如 `T00:00:00Z`。"
    },
    {
      "en-US": "```json\n{\n  \"evaluated_at\": \"2026-02-21T10:00:00Z\",\n  \"mode\": \"full\",\n  \"batch_progress\": {\n    \"total\": 80,\n    \"evaluated\": 80,\n    \"status\": \"completed\"\n  },\n  \"skills\": {\n    \"skill-name\": {\n      \"path\": \"~/.claude/skills/skill-name/SKILL.md\",\n      \"verdict\": \"Keep\",\n      \"reason\": \"Concrete, actionable, unique value for X workflow\",\n      \"mtime\": \"2026-01-15T08:30:00Z\"\n    }\n  }\n}\n```",
      "zh-Hans": "```json\n{\n  \"evaluated_at\": \"2026-02-21T10:00:00Z\",\n  \"mode\": \"full\",\n  \"batch_progress\": {\n    \"total\": 80,\n    \"evaluated\": 80,\n    \"status\": \"completed\"\n  },\n  \"skills\": {\n    \"skill-name\": {\n      \"path\": \"~/.claude/skills/skill-name/SKILL.md\",\n      \"verdict\": \"Keep\",\n      \"reason\": \"Concrete, actionable, unique value for X workflow\",\n      \"mtime\": \"2026-01-15T08:30:00Z\"\n    }\n  }\n}\n```"
    },
    {
      "en-US": "## Notes",
      "zh-Hans": "## 注意事项"
    },
    {
      "en-US": "- Evaluation is blind: the same checklist applies to all skills regardless of origin (ECC, self-authored, auto-extracted)\n- Archive / delete operations always require explicit user confirmation\n- No verdict branching by skill origin",
      "zh-Hans": "* 评估是盲目的：无论来源如何（ECC、自创、自动提取），所有技能都应用相同的检查清单\n* 归档 / 删除操作始终需要明确的用户确认\n* 不按技能来源进行判定分支"
    }
  ]
}