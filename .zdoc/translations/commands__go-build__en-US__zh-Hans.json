{
  "sourceFile": "commands/go-build.md",
  "sourceLanguage": "en-US",
  "entries": [
    {
      "en-US": "---\ndescription: Fix Go build errors, go vet warnings, and linter issues incrementally. Invokes the go-build-resolver agent for minimal, surgical fixes.\n---",
      "zh-Hans": "---\ndescription: 逐步修复Go构建错误、go vet警告和linter问题。调用go-build-resolver代理进行最小化、精确的修复。\n---"
    },
    {
      "en-US": "# Go Build and Fix",
      "zh-Hans": "# Go 构建与修复"
    },
    {
      "en-US": "This command invokes the **go-build-resolver** agent to incrementally fix Go build errors with minimal changes.",
      "zh-Hans": "此命令调用 **go-build-resolver** 代理，以最小的更改增量修复 Go 构建错误。"
    },
    {
      "en-US": "## What This Command Does",
      "zh-Hans": "## 此命令的作用"
    },
    {
      "en-US": "1. **Run Diagnostics**: Execute `go build`, `go vet`, `staticcheck`\n2. **Parse Errors**: Group by file and sort by severity\n3. **Fix Incrementally**: One error at a time\n4. **Verify Each Fix**: Re-run build after each change\n5. **Report Summary**: Show what was fixed and what remains",
      "zh-Hans": "1. **运行诊断**：执行 `go build`、`go vet`、`staticcheck`\n2. **解析错误**：按文件分组并按严重性排序\n3. **增量修复**：一次修复一个错误\n4. **验证每次修复**：每次更改后重新运行构建\n5. **报告摘要**：显示已修复的内容和剩余问题"
    },
    {
      "en-US": "## When to Use",
      "zh-Hans": "## 何时使用"
    },
    {
      "en-US": "Use `/go-build` when:",
      "zh-Hans": "在以下情况使用 `/go-build`："
    },
    {
      "en-US": "- `go build ./...` fails with errors\n- `go vet ./...` reports issues\n- `golangci-lint run` shows warnings\n- Module dependencies are broken\n- After pulling changes that break the build",
      "zh-Hans": "* `go build ./...` 因错误而失败\n* `go vet ./...` 报告问题\n* `golangci-lint run` 显示警告\n* 模块依赖关系损坏\n* 拉取更改后导致构建失败"
    },
    {
      "en-US": "## Diagnostic Commands Run",
      "zh-Hans": "## 运行的诊断命令"
    },
    {
      "en-US": "```bash\n# Primary build check\ngo build ./...\n\n# Static analysis\ngo vet ./...\n\n# Extended linting (if available)\nstaticcheck ./...\ngolangci-lint run\n\n# Module issues\ngo mod verify\ngo mod tidy -v\n```",
      "zh-Hans": "```bash\n# Primary build check\ngo build ./...\n\n# Static analysis\ngo vet ./...\n\n# Extended linting (if available)\nstaticcheck ./...\ngolangci-lint run\n\n# Module issues\ngo mod verify\ngo mod tidy -v\n```"
    },
    {
      "en-US": "## Example Session",
      "zh-Hans": "## 示例会话"
    },
    {
      "en-US": "```text\nUser: /go-build\n\nAgent:\n# Go Build Resolution\n\n## Initial Diagnostics\n\n```bash\n$ go build ./...\ninternal/service/user.go:25:15: undefined: UserRepository\ninternal/handler/api.go:42:9: cannot use x (type string) as type int\ninternal/handler/api.go:58:2: missing return at end of function\n```",
      "zh-Hans": "````text\nUser: /go-build\n\nAgent:\n# Go Build Resolution\n\n## Initial Diagnostics\n\n```bash\n$ go build ./...\ninternal/service/user.go:25:15: undefined: UserRepository\ninternal/handler/api.go:42:9: cannot use x (type string) as type int\ninternal/handler/api.go:58:2: missing return at end of function\n````"
    },
    {
      "en-US": "Errors found: 3",
      "zh-Hans": "发现错误：3"
    },
    {
      "en-US": "## Fix 1: Undefined Identifier",
      "zh-Hans": "## 修复 1：未定义的标识符"
    },
    {
      "en-US": "File: internal/service/user.go:25\nError: undefined: UserRepository\nCause: Missing import",
      "zh-Hans": "文件：internal/service/user.go:25\n错误：undefined: UserRepository\n原因：缺少导入"
    },
    {
      "en-US": "```go\n// Added import\nimport \"project/internal/repository\"\n\n// Changed\nvar repo UserRepository\n// To\nvar repo repository.UserRepository\n```",
      "zh-Hans": "```go\n// Added import\nimport \"project/internal/repository\"\n\n// Changed\nvar repo UserRepository\n// To\nvar repo repository.UserRepository\n```"
    },
    {
      "en-US": "```bash\n$ go build ./...\n# 2 errors remaining\n```",
      "zh-Hans": "```bash\n$ go build ./...\n# 2 errors remaining\n```"
    },
    {
      "en-US": "## Fix 2: Type Mismatch",
      "zh-Hans": "## 修复 2：类型不匹配"
    },
    {
      "en-US": "File: internal/handler/api.go:42\nError: cannot use x (type string) as type int",
      "zh-Hans": "文件：internal/handler/api.go:42\n错误：cannot use x (type string) as type int"
    },
    {
      "en-US": "```go\n// Changed\ncount := params.Get(\"count\")\n// To\ncountStr := params.Get(\"count\")\ncount, _ := strconv.Atoi(countStr)\n```",
      "zh-Hans": "```go\n// Changed\ncount := params.Get(\"count\")\n// To\ncountStr := params.Get(\"count\")\ncount, _ := strconv.Atoi(countStr)\n```"
    },
    {
      "en-US": "```bash\n$ go build ./...\n# 1 error remaining\n```",
      "zh-Hans": "```bash\n$ go build ./...\n# 1 error remaining\n```"
    },
    {
      "en-US": "## Fix 3: Missing Return",
      "zh-Hans": "## 修复 3：缺少返回"
    },
    {
      "en-US": "File: internal/handler/api.go:58\nError: missing return at end of function",
      "zh-Hans": "文件：internal/handler/api.go:58\n错误：missing return at end of function"
    },
    {
      "en-US": "```go\nfunc GetUser(id string) (*User, error) {\n    if id == \"\" {\n        return nil, ErrInvalidID\n    }\n    user := findUser(id)\n    // Added missing return\n    return user, nil\n}\n```",
      "zh-Hans": "```go\nfunc GetUser(id string) (*User, error) {\n    if id == \"\" {\n        return nil, ErrInvalidID\n    }\n    user := findUser(id)\n    // Added missing return\n    return user, nil\n}\n```"
    },
    {
      "en-US": "```bash\n$ go build ./...\n# Build successful!\n```",
      "zh-Hans": "```bash\n$ go build ./...\n# Build successful!\n```"
    },
    {
      "en-US": "## Final Verification",
      "zh-Hans": "## 最终验证"
    },
    {
      "en-US": "```bash\n$ go vet ./...\n# No issues\n\n$ go test ./...\nok      project/internal/service   0.015s\nok      project/internal/handler   0.023s\n```",
      "zh-Hans": "```bash\n$ go vet ./...\n# No issues\n\n$ go test ./...\nok      project/internal/service   0.015s\nok      project/internal/handler   0.023s\n```"
    },
    {
      "en-US": "## Summary",
      "zh-Hans": "## 摘要"
    },
    {
      "en-US": "| Metric | Count |\n|--------|-------|\n| Build errors fixed | 3 |\n| Vet warnings fixed | 0 |\n| Files modified | 2 |\n| Remaining issues | 0 |",
      "zh-Hans": "| 指标 | 数量 |\n|--------|-------|\n| 已修复的构建错误 | 3 |\n| 已修复的 Vet 警告 | 0 |\n| 已修改的文件 | 2 |\n| 剩余问题 | 0 |"
    },
    {
      "en-US": "Build Status: ✅ SUCCESS",
      "zh-Hans": "构建状态：✅ 成功"
    },
    {
      "en-US": "```\n\n## Common Errors Fixed\n\n| Error | Typical Fix |\n|-------|-------------|\n| `undefined: X` | Add import or fix typo |\n| `cannot use X as Y` | Type conversion or fix assignment |\n| `missing return` | Add return statement |\n| `X does not implement Y` | Add missing method |\n| `import cycle` | Restructure packages |\n| `declared but not used` | Remove or use variable |\n| `cannot find package` | `go get` or `go mod tidy` |\n\n## Fix Strategy\n\n1. **Build errors first** - Code must compile\n2. **Vet warnings second** - Fix suspicious constructs\n3. **Lint warnings third** - Style and best practices\n4. **One fix at a time** - Verify each change\n5. **Minimal changes** - Don't refactor, just fix\n\n## Stop Conditions\n\nThe agent will stop and report if:\n- Same error persists after 3 attempts\n- Fix introduces more errors\n- Requires architectural changes\n- Missing external dependencies\n\n## Related Commands\n\n- `/go-test` - Run tests after build succeeds\n- `/go-review` - Review code quality\n- `/verify` - Full verification loop\n\n## Related\n\n- Agent: `agents/go-build-resolver.md`\n- Skill: `skills/golang-patterns/`\n",
      "zh-Hans": "```\n\n## Common Errors Fixed\n\n| Error | Typical Fix |\n|-------|-------------|\n| `undefined: X` | Add import or fix typo |\n| `cannot use X as Y` | Type conversion or fix assignment |\n| `missing return` | Add return statement |\n| `X does not implement Y` | Add missing method |\n| `import cycle` | Restructure packages |\n| `declared but not used` | Remove or use variable |\n| `cannot find package` | `go get` or `go mod tidy` |\n\n## Fix Strategy\n\n1. **Build errors first** - Code must compile\n2. **Vet warnings second** - Fix suspicious constructs\n3. **Lint warnings third** - Style and best practices\n4. **One fix at a time** - Verify each change\n5. **Minimal changes** - Don't refactor, just fix\n\n## Stop Conditions\n\nThe agent will stop and report if:\n- Same error persists after 3 attempts\n- Fix introduces more errors\n- Requires architectural changes\n- Missing external dependencies\n\n## Related Commands\n\n- `/go-test` - Run tests after build succeeds\n- `/go-review` - Review code quality\n- `/verify` - Full verification loop\n\n## Related\n\n- Agent: `agents/go-build-resolver.md`\n- Skill: `skills/golang-patterns/`\n\n```"
    }
  ]
}